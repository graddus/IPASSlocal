<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="css/series.css">
</head>
<body>

<ul id="header">
  <li><a class="active" href="agenda.html">View Agenda</a></li>
  <li><a href="mylist.html">View Subscribed Series</a></li>
  <li><a href="mycompleted.html">View Completed Series</a></li>
   <li><a href="email.html">Manage E-mail Notifications</a></li>
   <li style="float:right"><a class="active" href="logout.html">Logout</a></li>
</ul>
<div id="seriesList">
 <h1>Currently Airing Series</h1>
  <table id="series">
 <tr>
 	<th>Series&emsp;</th>
    <th>Title&emsp;</th>
    <th>Genre&emsp;</th>
    <th>Episodes&emsp;</th> 
    <th>Rating&emsp;</th>
    <th>Viewers&emsp;</th>
    <th>Studio</th>
    <th>Synopsis&emsp;</th>
    <th>Follow this Series&emsp;</th>
  </tr>
 </table>
 </div>
<script src="https://code.jquery.com/jquery-3.2.0.min.js"></script>
<script>
function loadSeries(){
		var user=window.sessionStorage.getItem("user");
		$.getJSON("/thirdapp/restservices/series", function(data){
			$.each(data, function(i, series){
				$("#series").append(
				"<tr><td><center><img src=img/"+series.id+".jpg border=3 height=320 width=225></img></center>&emsp;<br></td>"
				+"<td><b>"+series.title+"</b>&emsp;<br></td>"
				+"<td>"+series.genre+"&emsp;<br></td>"
				+"<td>"+series.episodes+"&emsp;<br></td>"
				+"<td>"+series.score+"&emsp;<br></td>"
				+"<td>"+series.viewers+"&emsp;<br></td>"
				+"<td><a href=/thirdapp/studios/"+series.studio+".html>"+series.studio+"</a><br></td>"
				+"<td style=font-size:15px;>"+series.synopsis+"&emsp;<br></td>"
				+"<td><input type=button value=Follow data-custid="+user+" data-seriesid="+series.id+"></td></tr>");
			});

	});
}
</script>
<script>
$("#series").on('click', 'input[type=button]', function () {
       var custid = $(this).data('custid');
       var seriesid = $(this).data('seriesid');
    	    var data = { "CustomerID": custid, "SeriesID": seriesid }
    	    var JSONdata = JSON.stringify(data);
    	    console.log(data);
    	    $.post("/thirdapp/restservices/customerseries", JSONdata, function(response) {
    	        $("#response").text(JSON.stringify(response));
    	        alert("This Series has been added to your list!");
    	    }); 
    	});
</script>
<script>loadSeries()</script>


</body>
</html>
